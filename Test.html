<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Endurance Car Warranty Funnel</title>
  <meta
    name="description"
    content="Protect your investment with a fast, free quote on Endurance‚Äôs extended auto warranty plans‚Äîcovering all makes, models and mileages."
  />

  <!-- Meta Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1198572618104777');
    fbq('track', 'PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=1198572618104777&ev=PageView&noscript=1"/>
  </noscript>
  <!-- End Meta Pixel Code -->

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-D26GEV27FT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-D26GEV27FT');
  </script>

  <style>
    /* Reset and base styles */
    * { margin:0; padding:0; box-sizing:border-box; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif; }
    body { background:#f5f5f5; color:#333; line-height:1.5; }
    .container { max-width:600px; margin:0 auto; background:#fff; min-height:100vh; }

    /* ... rest of your existing CSS from the second page ... */

    .form-input.error { border-color: #e53e3e !important; }
    .response-message { display:none; padding:20px; margin:20px; border-radius:8px; text-align:center; }
    .response-message.success { background: #f0fff4; color: #2f855a; display:block; }
    .response-message.error   { background: #fff5f5; color: #c53030; display:block; }
  </style>
</head>

<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="logo">E</div>
      <a href="tel:8555932859" class="phone-icon">üìû</a>
    </div>
    <!-- Promo Bar -->
    <div class="promo-bar">Sign up and get $300 off your new contract!</div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Hero -->
      <h1 class="hero-title">PROTECT<br>YOUR INVESTMENT.</h1>
      <div class="orange-divider"></div>
      <p class="hero-description">
        If you're driving without auto protection, you're at risk for a costly repair bill.
        Get your fast, free quote for a customized Endurance protection plan today:
      </p>

      <!-- Benefits -->
      <!-- ... your existing benefits markup ... -->

      <!-- Testimonial -->
      <!-- ... your existing testimonial markup ... -->

      <!-- Form Section -->
      <div class="form-section">
        <div class="form-header">GET YOUR FREE QUOTE</div>
        <p class="form-description">
          Simply fill out the information below and we will follow up fast with your free, no-obligation quote.
        </p>

        <form id="quoteForm">
          <!-- Year -->
          <div class="form-group">
            <label for="year" class="form-label">Year *</label>
            <select id="year" name="year" class="form-select form-input"></select>
          </div>

          <!-- Make -->
          <div class="form-group">
            <label for="make" class="form-label">Make *</label>
            <select id="make" name="make" class="form-select form-input"></select>
          </div>

          <!-- Model -->
          <div class="form-group">
            <label for="model" class="form-label">Model *</label>
            <select id="model" name="model" class="form-select form-input" disabled>
              <option value="">Select Make First</option>
            </select>
          </div>

          <!-- Mileage -->
          <div class="form-group">
            <label for="mileage" class="form-label">Vehicle Mileage *</label>
            <select id="mileage" name="mileage" class="form-select form-input"></select>
          </div>

          <!-- ZIP Code -->
          <div class="form-group">
            <label for="zipcode" class="form-label">ZIP Code *</label>
            <div class="location-icon">
              <input type="text" id="zipcode" name="zipcode" class="form-input" placeholder="ZIP Code" />
            </div>
          </div>

          <!-- Phone -->
          <div class="form-group">
            <label for="phone" class="form-label">Phone *</label>
            <input type="tel" id="phone" name="phone" class="form-input" placeholder="(555) 123-4567" />
          </div>

          <!-- First Name -->
          <div class="form-group">
            <label for="firstName" class="form-label">First Name *</label>
            <input type="text" id="firstName" name="firstName" class="form-input" placeholder="First Name" />
          </div>

          <!-- Last Name -->
          <div class="form-group">
            <label for="lastName" class="form-label">Last Name *</label>
            <input type="text" id="lastName" name="lastName" class="form-input" placeholder="Last Name" />
          </div>

          <!-- Email -->
          <div class="form-group">
            <label for="email" class="form-label">Email Address *</label>
            <input type="email" id="email" name="email" class="form-input" placeholder="you@mail.com" />
          </div>

          <button type="submit" id="quote-button" class="submit-button">Get a FREE Quote</button>
        </form>

        <p class="call-now">
          For faster service, call us now at (855) 593-2859
        </p>

        <p class="legal-text">
          By clicking the button, you consent to Endurance using automated technology to call, email, and text you...
        </p>
      </div>

      <div id="responseMessage" class="response-message"></div>
    </div>

    <!-- Footer -->
    <!-- ... your existing footer markup ... -->
  </div>

  <!-- Hidden Google Form for Spreadsheet Logging -->
  <form id="hiddenVehicleForm" style="display: none;">
    <input name="year"         id="hidden-year">
    <input name="vehicleMake"  id="hidden-make">
    <input name="vehicleModel" id="hidden-model">
    <input name="vehicleMileage" id="hidden-mileage">
    <input name="zipcode"      id="hidden-zipcode">
    <input name="phone"        id="hidden-phone">
    <input name="name"         id="hidden-name">
    <input name="email"        id="hidden-email">
  </form>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // --- DATA SETUP ---
      const years = Array.from({length: 13}, (_,i) => 2024 - i);
      const autoMakers = [ /* full array from your first code */ ];
      const vehicleModels = { /* full object from your first code */ };
      const mileageRanges = [
        { id: "0_10k", name: "0 - 10,000 miles" },
        { id: "10k_20k", name: "10,000 - 20,000 miles" },
        /* etc... */
        { id: "100k_plus", name: "100,000+ miles" }
      ];

      // Populate Year
      const yearEl = document.getElementById("year");
      years.forEach(y => {
        const o = document.createElement("option");
        o.value = y; o.textContent = y;
        yearEl.appendChild(o);
      });

      // Populate Makes
      const makeEl = document.getElementById("make"),
            modelEl = document.getElementById("model"),
            mileageEl = document.getElementById("mileage");
      autoMakers.forEach(m => {
        const o = document.createElement("option");
        o.value = m.id; o.textContent = m.name;
        makeEl.appendChild(o);
      });
      // Populate Mileage
      mileageRanges.forEach(m => {
        const o = document.createElement("option");
        o.value = m.id; o.textContent = m.name;
        mileageEl.appendChild(o);
      });

      // On Make change ‚áí populate Models
      makeEl.addEventListener("change", () => {
        modelEl.innerHTML = "";
        const mods = vehicleModels[makeEl.value] || [];
        mods.forEach(m => {
          const o = document.createElement("option");
          o.value = m.id; o.textContent = m.name;
          modelEl.appendChild(o);
        });
        modelEl.disabled = !mods.length;
      });

      // FORM SUBMISSION
      const QUOTE_FORM = document.getElementById("quoteForm"),
            HIDDEN_FORM = document.getElementById("hiddenVehicleForm"),
            RESP = document.getElementById("responseMessage"),
            GWEB_URL = "https://script.google.com/macros/s/AKfycbzocj2fRbnkqF1j1BUuOa8ycNlLF62SokpfRzmQ1DUMhksJ3jUFd2xXoVcKsxZ5-TjgVA/exec";

      QUOTE_FORM.addEventListener("submit", e => {
        e.preventDefault();
        RESP.className = "response-message"; // reset

        // VALIDATION
        let valid = true;
        const required = ["year","make","model","mileage","zipcode","phone","firstName","lastName","email"];
        required.forEach(id => {
          const el = document.getElementById(id);
          if (!el.value.trim()) {
            valid = false;
            el.classList.add("error");
          } else {
            el.classList.remove("error");
          }
        });
        if (!valid) {
          RESP.textContent = "Please fill in all required fields.";
          RESP.classList.add("error");
          return;
        }

        // FIRE FB PIXEL TRACK
        if (typeof fbq === "function") {
          fbq('track','Lead');
          fbq('track','CompleteRegistration');
        }

        // POPULATE HIDDEN FORM
        document.getElementById("hidden-year").value        = yearEl.value;
        document.getElementById("hidden-make").value        = makeEl.options[makeEl.selectedIndex].text;
        document.getElementById("hidden-model").value       = modelEl.options[modelEl.selectedIndex].text;
        document.getElementById("hidden-mileage").value     = mileageEl.options[mileageEl.selectedIndex].text;
        document.getElementById("hidden-zipcode").value     = document.getElementById("zipcode").value;
        document.getElementById("hidden-phone").value       = document.getElementById("phone").value;
        document.getElementById("hidden-name").value        = `${document.getElementById("firstName").value} ${document.getElementById("lastName").value}`;
        document.getElementById("hidden-email").value       = document.getElementById("email").value;

        // SEND TO GOOGLE WEB APP
        const data = new URLSearchParams(new FormData(HIDDEN_FORM));
        fetch(GWEB_URL, { method: "POST", mode: "no-cors", body: data })
          .then(() => {
            RESP.textContent = "üéâ Thank you! Your quote request has been submitted.";
            RESP.classList.add("success");
          })
          .catch(err => {
            console.error(err);
            RESP.textContent = "‚ùå There was an error submitting your request. Please try again.";
            RESP.classList.add("error");
          });
      });
    });
  </script>
</body>
</html>
